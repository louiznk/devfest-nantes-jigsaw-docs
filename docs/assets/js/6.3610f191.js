(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{164:function(e,t,s){e.exports=s.p+"assets/img/Darth_Maven.871afe41.jpg"},165:function(e,t,s){e.exports=s.p+"assets/img/dependency-graph.56a88272.png"},177:function(e,t,s){"use strict";s.r(t);var a=[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"episode-iii-la-revanche-des-sith-maven"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#episode-iii-la-revanche-des-sith-maven","aria-hidden":"true"}},[this._v("#")]),this._v(" Episode III - La revanche des Sith Maven")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:s(164),alt:"Darth Maven"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Le côté obscure est très tendant et vous vous laissez séduire par les pouvoirs de modularisation de Maven, vous prenez alors le nom de "),t("strong",[this._v("Darth Jigsaw")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"devenir-un-vrai-seigneur-sith"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#devenir-un-vrai-seigneur-sith","aria-hidden":"true"}},[this._v("#")]),this._v(" Devenir un vrai seigneur sith")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Les sith allant toujours par deux, vous allez à la rencontre de votre maître "),t("strong",[this._v("Darth Maven")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("cd hands-on-jigsaw-devfest/2-sith\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("code",[this._v("api-starwars")]),this._v(": Le module de base définissant l'interface de récupération des héros.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("code",[this._v("api-starwars-local-impl")]),this._v(": L'implémentation in-memory de l'interface définie dans "),t("code",[this._v("api-starwars")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("code",[this._v("starwars-vertx-http-server")]),this._v(": Le server Vertx proposant une webapp et une API web utilisant "),t("code",[this._v("api-starwars-local-impl")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("code",[this._v("diffutils")]),this._v(": Le module nécessaire à "),t("code",[this._v("fuzzywuzzy")]),this._v(" et regroupant différentes méthodes utiles au calcul de la distance de levenshtein.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:s(165),alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("Gestion des dépendances")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("Si vous le désirez vous pouvez aussi utiliser l'image docker correspondante.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("docker pull louiznk/starwars:11-debian\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"todo-lancement-de-l-application-avec-java-8"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#todo-lancement-de-l-application-avec-java-8","aria-hidden":"true"}},[this._v("#")]),this._v(" $$TODO$$ - Lancement de l'application avec Java 8")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Rendez-vous sur le projet récupéré au chapitre 1 et déplacez-vous sur la branche "),t("code",[this._v("j8-vertx")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('git add .\ngit commit -m "feat: EPISODE 2"\ngit checkout j8-vertx\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Importez le projet dans votre IDE et lancer l'application avec Java 8 puis Java 9 (vous pouvez utiliser votre JAVA_HOME ou sdk use java "),t("code",[this._v("version")]),this._v(" et pour connaitre les version que vous avez via sdkman "),t("code",[this._v("sdk list java")]),this._v(").")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("sdk use java <JAVA_8_VERSION>\n./gradlew build\n./gradlew run\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("sdk use java <JAVA_9_VERSION>\n./gradlew build\n./gradlew run\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("Dans cette page regardez les informations sur les modules (ou non).")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"recuperation-de-l-application-avec-du-code-java-9"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#recuperation-de-l-application-avec-du-code-java-9","aria-hidden":"true"}},[this._v("#")]),this._v(" Récupération de l'application avec du code Java 9")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Un de vos fidèles co-équipier a mis à jour le code pour qu'il utilise les dernières fonctionnalités proposées par Java 9.\nRendez-vous sur la branche "),t("code",[this._v("j9-vertx-classpath")]),this._v(" et lancez l'application en utilisant Java 9 avec le classpath.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("git checkout j9-vertx-classpath\n./gradlew build\n./gradlew run\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("sdk use java <JAVA_9_VERSION>\n./gradlew check run\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"modularisation-de-l-application-s-occuper-du-menu-fretin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#modularisation-de-l-application-s-occuper-du-menu-fretin","aria-hidden":"true"}},[this._v("#")]),this._v(" Modularisation de l'application: s'occuper du menu fretin.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Vous allez maintenant utiliser votre pouvoir pour modulariser votre application.\nCommencez par modulariser les modules "),t("code",[this._v("api-marvel")]),this._v(", "),t("code",[this._v("diff-utils")]),this._v(" et "),t("code",[this._v("fuzzywuzzy")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Ajouter pour chaque module dans le fichier "),t("code",[this._v("build.gradle")]),this._v(" le plugin chainsaw.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("plugins {\n    ...\n    id 'com.zyxist.chainsaw' version '0.3.1'\n}\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("./gradlew clean build\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"modularisation-de-l-application-le-bras-droit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#modularisation-de-l-application-le-bras-droit","aria-hidden":"true"}},[this._v("#")]),this._v(" Modularisation de l'application: le bras droit")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Modularisez à présent le module "),t("code",[this._v("marvel-local-impl")]),this._v(", attention cependant, celui-ci possède également des tests que vous vous sentez obligé de rendre passant. Pour qu'ils puissent s'exécuter en utilisant les modules faite la modification suivante dans le fichier "),t("code",[this._v("build.gradle")]),this._v(" à la racine du projet.")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-diff extra-class"},[s("pre",{pre:!0,attrs:{class:"language-diff"}},[s("code",[e._v("[...]\n    test {\n        useJUnitPlatform()\n"),s("span",{attrs:{class:"token deleted"}},[e._v('-        environment "MARVEL", "CLASSPATH"')]),e._v("\n"),s("span",{attrs:{class:"token deleted"}},[e._v('-        environment "HTTP", "CLASSPATH"')]),e._v("\n"),s("span",{attrs:{class:"token inserted"}},[e._v('+        environment "MARVEL", "JIGSAW" // Enable some Jigsaw Specific Test for the marvel-local-impl module')]),e._v("\n"),s("span",{attrs:{class:"token inserted"}},[e._v('+        environment "HTTP", "JIGSAW" // Enable some Jigsaw Specific Test for the marvel-http-server module')]),e._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("Attention! IntelliJ n'exécute pas les tests en utilisant les modules.")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[e._v("JUnit n'a pas accès à votre module par réflexivité.")]),e._v(" "),s("li",[s("code",[e._v("InMemoryCharactersApi.java")]),e._v(" charge les fichiers en utilisant "),s("code",[e._v("getClassLoader")]),e._v(" qu'il faut remplacer par "),s("code",[e._v("getModule")]),e._v(".")]),e._v(" "),s("li",[e._v("Les ressources ne sont pas accessibles par vos tests, il faut donc modifier gradle pour copier ces ressources dans le dossier de classes java.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('test {\n    ...\n    doFirst {\n        // can\'t access to file in resources directory => copy to java classes directory\n        copy {\n            from "$projectDir/src/main/resources"\n            into "$buildDir/classes/java/main/"\n        }\n    }\n}\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Plus qu'un seul test devrait échouer, cele est dû au fait que les ressources dans "),t("code",[this._v("img")]),this._v(' ne sont pas ouvertes (open) et que ces resources sont "protégées".\nEffectuer les modifications nécessaires pour rendre tous les tests passant.')])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("Il y a notamment quelques précisions dans la javadoc suivante.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('https://docs.oracle.com/javase/9/docs/api/java/lang/Module.html#getResourceAsStream-java.lang.String-\n\n...\nA resource in a named module may be encapsulated so that it cannot be located by code in other modules. Whether a resource can be located or not is determined as follows:\n\n * If the resource name ends with ".class" then it is not encapsulated.\n * A package name is derived from the resource name. If the package name is a package in the module then the resource can only be located by the caller of this method when the package is open to at least the caller\'s module. If the resource is not in a package in the module then the resource is not encapsulated.\n...\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Modifier le fichier "),t("code",[this._v("build.gradle")]),this._v(" à la racine de votre projet et faites la modifications suivante.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-diff extra-class"},[t("pre",{pre:!0,attrs:{class:"language-diff"}},[t("code",[this._v("subprojects {\n  afterEvaluate {\n    [...]\n    test {\n"),t("span",{attrs:{class:"token deleted"}},[this._v('-       environment "MARVEL", "CLASSPATH"')]),this._v("\n"),t("span",{attrs:{class:"token inserted"}},[this._v('+       environment "MARVEL", "JIGSAW"')]),this._v("\n    }\n")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",[s("em",[e._v("Attention")]),e._v(" Chainsaw n'ouvre pas votre module au module "),s("code",[e._v("org.junit.platform.commons")]),e._v(". Afin que vos tests puissent fonctionner, il est nécessaire d'ajouter la configuration suivante dans le fichier "),s("code",[e._v("build.gradle")]),e._v(" du module "),s("code",[e._v("marvel-local-impl")]),e._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("javaModule.hacks {\n    exports('org.zenika.handson.jigsaw.api.local.impl', 'org.zenika.handson.jigsaw.api.local.impl', 'org.junit.platform.commons')\n}\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("Toujours pas K.O ? Il est temps de s'attaquer maintenant au BOSS, l'application Web.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"modularisation-de-l-application-le-boss"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#modularisation-de-l-application-le-boss","aria-hidden":"true"}},[this._v("#")]),this._v(" Modularisation de l'application: le BOSS")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Modularisez à présent le serveur HTTP "),t("code",[this._v("marvel-http-server")]),this._v(" qui, comme précédemment, contient des tests qui doivent fonctionner pour achever votre mission.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("permettre d'exposer les ressources statiques (fichier js, html, css, ...) de l'application web.")]),this._v(" "),t("li",[this._v("utiliser l'implémentation de "),t("code",[this._v("org.zenika.handson.jigsaw.api.CharactersApi")]),this._v(" (qui est fournit par le module "),t("code",[this._v("marvel-local-impl")]),this._v(").")])])}],r=s(0),i=Object(r.a)({},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[e._m(0),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(4),e._v(" "),e._m(5),s("p",[e._v("Votre maître vous demande de modulariser une application, listant les héros de la galaxie, fonctionnant sous Java 11 pour la rendre compatible avec les modules de Java.")]),e._v(" "),s("p",[e._v("L'application est composée des plusieurs modules:")]),e._v(" "),s("ul",[e._m(6),e._v(" "),e._m(7),e._v(" "),e._m(8),e._v(" "),s("li",[s("code",[e._v("fuzzywuzzy")]),e._v(": "),s("a",{attrs:{href:"https://github.com/xdrop/fuzzywuzzy",target:"_blank",rel:"noopener noreferrer"}},[e._v("La librairie de Fuzzy Search"),s("OutboundLink")],1),e._v(" utilisée par "),s("code",[e._v("api-starwars-local-impl")]),e._v(".")]),e._v(" "),e._m(9)]),e._v(" "),s("p",[e._v("Les intéractions entre ces modules peuvent se représenter ainsi:")]),e._v(" "),e._m(10),e._v(" "),e._m(11),e._v(" "),s("p",[e._v("L'ensemble du projet est géré avec "),s("a",{attrs:{href:"https://gradle.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Gradle"),s("OutboundLink")],1),e._v(".\nLa gestion des modules au moment de la compilation et d'exécution est géré par le plugin Gradle "),s("a",{attrs:{href:"https://github.com/zyxist/chainsaw",target:"_blank",rel:"noopener noreferrer"}},[e._v("chainsaw"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("blockquote",[s("p",[e._v("La version finale de l'application est déployée et disponible "),s("a",{attrs:{href:"http://starwars.cleverapps.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("ici"),s("OutboundLink")],1),e._v(".")])]),e._v(" "),e._m(12),e._v(" "),e._m(13),e._m(14),e._v(" "),e._m(15),e._v(" "),e._m(16),e._m(17),e._v(" "),e._m(18),e._m(19),s("p",[e._v("Constatez que l'application fonctionne en ouvrant votre navigateur sur l'URL "),s("a",{attrs:{href:"http://localhost:8080",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://localhost:8080"),s("OutboundLink")],1),e._v(" et notamment la page "),s("a",{attrs:{href:"http://localhost:8080/infos",target:"_blank",rel:"noopener noreferrer"}},[e._v("infos"),s("OutboundLink")],1),e._v(".")]),e._v(" "),e._m(20),e._v(" "),e._m(21),e._v(" "),e._m(22),e._v(" "),e._m(23),s("p",[e._v("Comme précédemment vous ne devriez pas avoir de module name sur la page "),s("a",{attrs:{href:"http://localhost:8080/infos",target:"_blank",rel:"noopener noreferrer"}},[e._v("infos"),s("OutboundLink")],1)]),e._v(" "),s("p",[e._v("L'application doit fonctionner en mode classpath avec Java 9 (mais pas Java 8).")]),e._v(" "),e._m(24),s("p",[e._v("Retournez sur la page "),s("a",{attrs:{href:"http://localhost:8080/infos",target:"_blank",rel:"noopener noreferrer"}},[e._v("infos"),s("OutboundLink")],1),e._v(' et vous verrez les modules du JDK qui sont "chargés" (et toujours pas de module name).')]),e._v(" "),e._m(25),e._v(" "),e._m(26),e._v(" "),e._m(27),e._v(" "),e._m(28),s("p",[e._v("N'hésitez à vous appuyer sur vos "),s("router-link",{attrs:{to:"./TIPS.html"}},[e._v("TIPS")]),e._v(" en cas de problème(s)!")],1),e._v(" "),s("p",[e._v("Vérfiez que tout compile encore en lançant un build.")]),e._v(" "),e._m(29),e._m(30),e._v(" "),e._m(31),e._v(" "),e._m(32),e._m(33),e._v(" "),s("p",[e._v("Les tests ne devraient pas passer. Cela est dû à plusieurs problèmes:")]),e._v(" "),e._m(34),e._v(" "),e._m(35),e._m(36),e._v(" "),e._m(37),e._v(" "),e._m(38),e._m(39),e._v(" "),e._m(40),e._m(41),e._v(" "),e._m(42),e._m(43),e._v(" "),e._m(44),e._v(" "),e._m(45),e._v(" "),s("p",[e._v("Ce module doit:")]),e._v(" "),e._m(46),e._v(" "),s("p",[e._v("Lancez votre application qui doit maintenant fonctionner en utilisant les modules.")]),e._v(" "),s("blockquote",[s("p",[e._v("Bravo vous avez réussi à modulariser votre première application en utilisant les modules Java! Si vous êtes toujours vivant, continuez "),s("router-link",{attrs:{to:"./EPISODE_4.html"}},[e._v("au chapitre suivant")]),e._v(".")],1)])])},a,!1,null,null,null);i.options.__file="EPISODE_3.md";t.default=i.exports}}]);